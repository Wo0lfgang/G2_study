!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@antv/g-lite")):"function"==typeof define&&define.amd?define(["exports","@antv/g-lite"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).G=t.G||{},t.G.Canvas2D={}),t.window.G)}(this,(function(t,e){"use strict";function r(){r=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var i=Object.create((e&&e.prototype instanceof p?e:p).prototype),a=new M(n||[]);return o(i,"_invoke",{value:E(t,r,a)}),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var f={};function p(){}function v(){}function d(){}var y={};u(y,a,(function(){return this}));var g=Object.getPrototypeOf,m=g&&g(g(S([])));m&&m!==e&&n.call(m,a)&&(y=m);var w=d.prototype=p.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function r(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,h=u.value;return h&&"object"==typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function E(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return k()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=l(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return v.prototype=d,o(w,"constructor",{value:d,configurable:!0}),o(d,"constructor",{value:v,configurable:!0}),v.displayName=u(d,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(b.prototype),u(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(h(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(w),u(w,s,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(this.prev>=i.tryLoc){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(i.catchLoc>this.prev)return r(i.catchLoc,!0);if(i.finallyLoc>this.prev)return r(i.finallyLoc)}else if(c){if(i.catchLoc>this.prev)return r(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(i.finallyLoc>this.prev)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(this.prev>=o.tryLoc&&n.call(o,"finallyLoc")&&o.finallyLoc>this.prev){var i=o;break}}i&&("break"===t||"continue"===t)&&e>=i.tryLoc&&i.finallyLoc>=e&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function n(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function c(t){n(a,o,i,c,s,"next",t)}function s(t){n(a,o,i,c,s,"throw",t)}c(void 0)}))}}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}var c="undefined"!=typeof Float32Array?Float32Array:Array;function s(){var t=new c(16);return c!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function h(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],c=e[4],s=e[5],u=e[6],h=e[7],l=e[8],f=e[9],p=e[10],v=e[11],d=e[12],y=e[13],g=e[14],m=e[15],w=r[0],x=r[1],b=r[2],E=r[3];return t[0]=w*n+x*c+b*l+E*d,t[1]=w*o+x*s+b*f+E*y,t[2]=w*i+x*u+b*p+E*g,t[3]=w*a+x*h+b*v+E*m,t[4]=(w=r[4])*n+(x=r[5])*c+(b=r[6])*l+(E=r[7])*d,t[5]=w*o+x*s+b*f+E*y,t[6]=w*i+x*u+b*p+E*g,t[7]=w*a+x*h+b*v+E*m,t[8]=(w=r[8])*n+(x=r[9])*c+(b=r[10])*l+(E=r[11])*d,t[9]=w*o+x*s+b*f+E*y,t[10]=w*i+x*u+b*p+E*g,t[11]=w*a+x*h+b*v+E*m,t[12]=(w=r[12])*n+(x=r[13])*c+(b=r[14])*l+(E=r[15])*d,t[13]=w*o+x*s+b*f+E*y,t[14]=w*i+x*u+b*p+E*g,t[15]=w*a+x*h+b*v+E*m,t}function l(t,e,r){var n,o,i,a,c,s,u,h,l,f,p,v,d=r[0],y=r[1],g=r[2];return e===t?(t[12]=e[0]*d+e[4]*y+e[8]*g+e[12],t[13]=e[1]*d+e[5]*y+e[9]*g+e[13],t[14]=e[2]*d+e[6]*y+e[10]*g+e[14],t[15]=e[3]*d+e[7]*y+e[11]*g+e[15]):(o=e[1],i=e[2],a=e[3],c=e[4],s=e[5],u=e[6],h=e[7],l=e[8],f=e[9],p=e[10],v=e[11],t[0]=n=e[0],t[1]=o,t[2]=i,t[3]=a,t[4]=c,t[5]=s,t[6]=u,t[7]=h,t[8]=l,t[9]=f,t[10]=p,t[11]=v,t[12]=n*d+c*y+l*g+e[12],t[13]=o*d+s*y+f*g+e[13],t[14]=i*d+u*y+p*g+e[14],t[15]=a*d+h*y+v*g+e[15]),t}function f(){var t=new c(3);return c!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function p(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function v(t,e,r){var n=e[0],o=e[1],i=e[2],a=r[3]*n+r[7]*o+r[11]*i+r[15];return t[0]=(r[0]*n+r[4]*o+r[8]*i+r[12])/(a=a||1),t[1]=(r[1]*n+r[5]*o+r[9]*i+r[13])/a,t[2]=(r[2]*n+r[6]*o+r[10]*i+r[14])/a,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var d;d=f();!function(){var t,e=(t=new c(2),c!=Float32Array&&(t[0]=0,t[1]=0),t)}();function y(t,e,r){return{x:t*Math.cos(r)-e*Math.sin(r),y:t*Math.sin(r)+e*Math.cos(r)}}function g(t,e,r,n,o,i,a,c,s,u){var h,l,f,p,v,d=t,m=e,w=r,x=n,b=c,E=s,L=120*Math.PI/180,O=Math.PI/180*(+o||0),P=[];if(u)l=u[0],f=u[1],p=u[2],v=u[3];else{m=(h=y(d,m,-O)).y;var M=((d=h.x)-(b=(h=y(b,E,-O)).x))/2,S=(m-(E=h.y))/2,k=M*M/(w*w)+S*S/(x*x);k>1&&(w*=k=Math.sqrt(k),x*=k);var T=w*w,A=x*x,_=(i===a?-1:1)*Math.sqrt(Math.abs((T*A-T*S*S-A*M*M)/(T*S*S+A*M*M)));p=_*w*S/x+(d+b)/2,l=Math.asin(((m-(v=_*-x*M/w+(m+E)/2))/x*1e9>>0)/1e9),f=Math.asin(((E-v)/x*1e9>>0)/1e9),0>(l=p>d?Math.PI-l:l)&&(l=2*Math.PI+l),0>(f=p>b?Math.PI-f:f)&&(f=2*Math.PI+f),a&&l>f&&(l-=2*Math.PI),!a&&f>l&&(f-=2*Math.PI)}var C=f-l;if(Math.abs(C)>L){var j=f,N=b,R=E;P=g(b=p+w*Math.cos(f=l+L*(a&&f>l?1:-1)),E=v+x*Math.sin(f),w,x,o,0,a,N,R,[f,j,p,v])}C=f-l;var I=Math.cos(l),G=Math.sin(l),F=Math.cos(f),D=Math.sin(f),B=Math.tan(C/4),$=4/3*w*B,H=4/3*x*B,Y=[d,m],W=[d+$*G,m-H*I],U=[b+$*D,E-H*F],X=[b,E];if(W[0]=2*Y[0]-W[0],W[1]=2*Y[1]-W[1],u)return W.concat(U,X,P);for(var z=[],q=0,Q=(P=W.concat(U,X,P)).length;Q>q;q+=1)z[q]=q%2?y(P[q-1],P[q],O).y:y(P[q],P[q+1],O).x;return z}var m=function(t){return null==t},w={}.toString,x=function(t,e){return w.call(t)==="[object "+e+"]"},b=function(t){return x(t,"String")},E=function(t,e,r){return e>t?e:t>r?r:t},L=function(t){return x(t,"Number")};function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}function P(t,e){var r=e.r;t.arc(r,r,r,0,2*Math.PI,!1)}function M(t,e){var r=e.rx,n=e.ry;if(t.ellipse)t.ellipse(r,n,r,n,0,0,2*Math.PI,!1);else{var o=r>n?r:n,i=r>n?1:r/n,a=r>n?n/r:1;t.save(),t.scale(i,a),t.arc(0,0,o,0,2*Math.PI)}}function S(t,r){var n=r.x1,o=r.y1,i=r.x2,a=r.y2,c=r.defX,s=void 0===c?0:c,u=r.defY,h=void 0===u?0:u,l=r.markerStart,f=r.markerEnd,p=r.markerStartOffset,v=r.markerEndOffset,d=0,y=0,g=0,m=0,w=0;l&&e.isDisplayObject(l)&&p&&(d=Math.cos(w=Math.atan2(a-o,i-n))*(p||0),y=Math.sin(w)*(p||0)),f&&e.isDisplayObject(f)&&v&&(g=Math.cos(w=Math.atan2(o-a,n-i))*(v||0),m=Math.sin(w)*(v||0)),t.moveTo(n-s+d,o-h+y),t.lineTo(i-s+g,a-h+m)}function k(t,r){var n=r.defX,o=void 0===n?0:n,i=r.defY,a=void 0===i?0:i,c=r.markerStart,s=r.markerEnd,u=r.markerStartOffset,h=r.markerEndOffset,l=r.path,f=l.absolutePath,p=l.segments,v=0,d=0,y=0,g=0,m=0;if(c&&e.isDisplayObject(c)&&u){var w=c.parentNode.getStartTangent(),x=w[0],b=w[1];v=Math.cos(m=Math.atan2(x[1]-b[1],x[0]-b[0]))*(u||0),d=Math.sin(m)*(u||0)}if(s&&e.isDisplayObject(s)&&h){var E=s.parentNode.getEndTangent(),L=E[0],O=E[1];y=Math.cos(m=Math.atan2(L[1]-O[1],L[0]-O[0]))*(h||0),g=Math.sin(m)*(h||0)}for(var P=0;f.length>P;P++){var M=f[P],S=f[P+1],k=0===P&&(0!==v||0!==d),T=(P===f.length-1||S&&("M"===S[0]||"Z"===S[0]))&&0!==y&&0!==g;switch(M[0]){case"M":k?(t.moveTo(M[1]-o+v,M[2]-a+d),t.lineTo(M[1]-o,M[2]-a)):t.moveTo(M[1]-o,M[2]-a);break;case"L":T?t.lineTo(M[1]-o+y,M[2]-a+g):t.lineTo(M[1]-o,M[2]-a);break;case"Q":t.quadraticCurveTo(M[1]-o,M[2]-a,M[3]-o,M[4]-a),T&&t.lineTo(M[3]-o+y,M[4]-a+g);break;case"C":t.bezierCurveTo(M[1]-o,M[2]-a,M[3]-o,M[4]-a,M[5]-o,M[6]-a),T&&t.lineTo(M[5]-o+y,M[6]-a+g);break;case"A":var A=p[P].arcParams,_=A.cx,C=A.cy,j=A.rx,N=A.ry,R=A.startAngle,I=A.endAngle,G=A.xRotation,F=A.sweepFlag;if(t.ellipse)t.ellipse(_-o,C-a,j,N,G,R,I,!!(1-F));else{var D=j>N?j:N,B=j>N?1:j/N,$=j>N?N/j:1;t.translate(_-o,C-a),t.rotate(G),t.scale(B,$),t.arc(0,0,D,R,I,!!(1-F)),t.scale(1/B,1/$),t.rotate(-G),t.translate(-(_-o),-(C-a))}T&&t.lineTo(M[6]-o+y,M[7]-a+g);break;case"Z":t.closePath()}}}function T(t,r){var n=r.defX,o=void 0===n?0:n,i=r.defY,a=void 0===i?0:i,c=r.markerStart,s=r.markerEnd,u=r.markerStartOffset,h=r.markerEndOffset,l=r.points.points,f=l.length,p=l[0][0]-o,v=l[0][1]-a,d=l[f-1][0]-o,y=l[f-1][1]-a,g=0,m=0,w=0,x=0,b=0;c&&e.isDisplayObject(c)&&u&&(g=Math.cos(b=Math.atan2(l[1][1]-l[0][1],l[1][0]-l[0][0]))*(u||0),m=Math.sin(b)*(u||0)),s&&e.isDisplayObject(s)&&h&&(w=Math.cos(b=Math.atan2(l[f-1][1]-l[0][1],l[f-1][0]-l[0][0]))*(h||0),x=Math.sin(b)*(h||0)),t.moveTo(p+(g||w),v+(m||x));for(var E=1;f-1>E;E++){var L=l[E];t.lineTo(L[0]-o,L[1]-a)}t.lineTo(d,y)}function A(t,r){var n=r.defX,o=void 0===n?0:n,i=r.defY,a=void 0===i?0:i,c=r.markerStart,s=r.markerEnd,u=r.markerStartOffset,h=r.markerEndOffset,l=r.points.points,f=l.length,p=l[0][0]-o,v=l[0][1]-a,d=l[f-1][0]-o,y=l[f-1][1]-a,g=0,m=0,w=0,x=0,b=0;c&&e.isDisplayObject(c)&&u&&(g=Math.cos(b=Math.atan2(l[1][1]-l[0][1],l[1][0]-l[0][0]))*(u||0),m=Math.sin(b)*(u||0)),s&&e.isDisplayObject(s)&&h&&(w=Math.cos(b=Math.atan2(l[f-2][1]-l[f-1][1],l[f-2][0]-l[f-1][0]))*(h||0),x=Math.sin(b)*(h||0)),t.moveTo(p+g,v+m);for(var E=1;f-1>E;E++){var L=l[E];t.lineTo(L[0]-o,L[1]-a)}t.lineTo(d+w,y+x)}function _(t,e){var r=e.radius,n=e.width,o=e.height,i=n,a=o;if(r&&r.some((function(t){return 0!==t}))){var c=n>0?1:-1,s=o>0?1:-1,u=c+s===0,h=r.map((function(t){return E(t,0,Math.min(Math.abs(i)/2,Math.abs(a)/2))})),l=h[0],f=h[1],p=h[2],v=h[3];t.moveTo(c*l,0),t.lineTo(i-c*f,0),0!==f&&t.arc(i-c*f,s*f,f,-s*Math.PI/2,c>0?0:Math.PI,u),t.lineTo(i,a-s*p),0!==p&&t.arc(i-c*p,a-s*p,p,c>0?0:Math.PI,s>0?Math.PI/2:1.5*Math.PI,u),t.lineTo(c*v,a),0!==v&&t.arc(c*v,a-s*v,v,s>0?Math.PI/2:-Math.PI/2,c>0?Math.PI:0,u),t.lineTo(0,s*l),0!==l&&t.arc(c*l,s*l,l,c>0?Math.PI:0,s>0?1.5*Math.PI:Math.PI/2,u)}else t.rect(0,0,i,a)}var C=function(t){var r,n;function o(){for(var e,r=arguments.length,n=Array(r),o=0;r>o;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).name="canvas-path-generator",e}(r=o).prototype=Object.create((n=t).prototype),r.prototype.constructor=r,O(r,n);var i=o.prototype;return i.init=function(){var t,r=((t={})[e.Shape.CIRCLE]=P,t[e.Shape.ELLIPSE]=M,t[e.Shape.RECT]=_,t[e.Shape.LINE]=S,t[e.Shape.POLYLINE]=A,t[e.Shape.POLYGON]=T,t[e.Shape.PATH]=k,t[e.Shape.TEXT]=void 0,t[e.Shape.GROUP]=void 0,t[e.Shape.IMAGE]=void 0,t[e.Shape.HTML]=void 0,t[e.Shape.MESH]=void 0,t);this.context.pathGeneratorFactory=r},i.destroy=function(){delete this.context.pathGeneratorFactory},o}(e.AbstractRendererPlugin),j=Object.freeze({__proto__:null,Plugin:C});function N(){N=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=Object.create((e&&e.prototype instanceof f?e:f).prototype),a=new P(o||[]);return n(i,"_invoke",{value:b(t,r,a)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function v(){}var d={};s(d,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(M([])));g&&g!==e&&r.call(g,i)&&(d=g);var m=v.prototype=f.prototype=Object.create(d);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(n,i,a,c){var s=h(t[n],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function b(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=h(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,l;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function M(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},w(x.prototype),s(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(m),s(m,c,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=M,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(this.prev>=i.tryLoc){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(i.catchLoc>this.prev)return n(i.catchLoc,!0);if(i.finallyLoc>this.prev)return n(i.finallyLoc)}else if(c){if(i.catchLoc>this.prev)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(i.finallyLoc>this.prev)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(this.prev>=o.tryLoc&&r.call(o,"finallyLoc")&&o.finallyLoc>this.prev){var i=o;break}}i&&("break"===t||"continue"===t)&&e>=i.tryLoc&&i.finallyLoc>=e&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:M(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function R(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function I(t,e){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},I(t,e)}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);e>r;r++)n[r]=t[r];return n}function F(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return G(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0;return function(){return t.length>n?{done:!1,value:t[n++]}:{done:!0}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var D=f(),B=f(),$=f(),H=s(),Y=function(){function t(){var t=this;this.canvasConfig=void 0,this.pathGeneratorFactory=void 0,this.pointInPathPickerFactory=void 0,this.isHit=function(r,n,o,i,a){var c,s,u,h,l,f,d,y,g,m,w,x,b,E,L,O,P,M,S,k,T,A,_,C,j,N,R,I,G,F,D,Y=t.pointInPathPickerFactory[r.nodeName];if(Y){var W=(c=H,(D=(S=(u=(s=o)[0])*(y=s[5])-(h=s[1])*(d=s[4]))*(F=(b=s[10])*(M=s[15])-(E=s[11])*(P=s[14]))-(k=u*(g=s[6])-(l=s[2])*d)*(G=(x=s[9])*M-E*(O=s[13]))+(T=u*(m=s[7])-(f=s[3])*d)*(I=x*P-b*O)+(A=h*g-l*y)*(R=(w=s[8])*M-E*(L=s[12]))-(_=h*m-f*y)*(N=w*P-b*L)+(C=l*m-f*g)*(j=w*O-x*L))?(c[0]=(y*F-g*G+m*I)*(D=1/D),c[1]=(l*G-h*F-f*I)*D,c[2]=(O*C-P*_+M*A)*D,c[3]=(b*_-x*C-E*A)*D,c[4]=(g*R-d*F-m*N)*D,c[5]=(u*F-l*R+f*N)*D,c[6]=(P*T-L*C-M*k)*D,c[7]=(w*C-b*T+E*k)*D,c[8]=(d*G-y*R+m*j)*D,c[9]=(h*R-u*G-f*j)*D,c[10]=(L*_-O*T+M*S)*D,c[11]=(x*T-w*_-E*S)*D,c[12]=(y*N-d*I-g*j)*D,c[13]=(u*I-h*N+l*j)*D,c[14]=(O*k-L*A-P*S)*D,c[15]=(w*A-x*k+b*S)*D,c):null),U=v(B,p($,n[0],n[1],0),W),X=r.getGeometryBounds().halfExtents,z=r.parsedStyle.anchor;if(U[0]+=(z&&z[0]||0)*X[0]*2,U[1]+=(z&&z[1]||0)*X[1]*2,Y(r,new e.Point(U[0],U[1]),i,t.isPointInPath,a))return!0}return!1},this.isPointInPath=function(e,r,n){var o=e.offscreenCanvas.getOrCreateContext(t.canvasConfig.offscreenCanvas),i=t.pathGeneratorFactory[r.nodeName];return i&&(o.beginPath(),i(o,r.parsedStyle),o.closePath()),o.isPointInPath(n.x,n.y)}}var r=t.prototype;return r.apply=function(e,r){var n,o=this,i=e.renderingService,a=e.renderingContext,c=e.pathGeneratorFactory,s=e.pointInPathPickerFactory;this.canvasConfig=e.config,this.pathGeneratorFactory=c,this.pointInPathPickerFactory=s;var u=null===(n=a.root)||void 0===n?void 0:n.ownerDocument;i.hooks.pick.tapPromise(t.tag,function(){var t,e=(t=N().mark((function t(e){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.pick(u,e,r));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){R(i,n,o,a,c,"next",t)}function c(t){R(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}()),i.hooks.pickSync.tap(t.tag,(function(t){return o.pick(u,t,r)}))},r.pick=function(t,r,n){for(var o,i=r.topmost,a=r.position,c=p(D,a.x,a.y,0),s=[],u=F(t.elementsFromBBox(c[0],c[1],c[0],c[1]));!(o=u()).done;){var h=o.value,l=h.getWorldTransform();if(this.isHit(h,c,l,!1,n)){var f=e.findClosestClipPathTarget(h);if(f){var v=f.parsedStyle.clipPath;if(this.isHit(v,c,v.getWorldTransform(),!0,n)){if(i)return r.picked=[h],r;s.push(h)}}else{if(i)return r.picked=[h],r;s.push(h)}}}return r.picked=s,r},t}();function W(t,e,r,n){var o=t-r,i=e-n;return Math.sqrt(o*o+i*i)}function U(t,e){return.001>Math.abs(t-e)}function X(t,e){var r=Math.min.apply(Math,t),n=Math.min.apply(Math,e);return{x:r,y:n,width:Math.max.apply(Math,t)-r,height:Math.max.apply(Math,e)-n}}function z(t){return(t+2*Math.PI)%(2*Math.PI)}Y.tag="CanvasPicker";var q=function(t,e,r,n,o){return{x:(1-o)*t+o*r,y:(1-o)*e+o*n}},Q=function(t,e,r,n,o,i){var a=[r-t,n-e];if(function(t,e){return t[0]===e[0]&&t[1]===e[1]}(a,[0,0]))return Math.sqrt((o-t)*(o-t)+(i-e)*(i-e));var c=[-a[1],a[0]];return function(t,e){var r=e[0],n=e[1],o=r*r+n*n;o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o}(c,c),Math.abs(function(t,e){return t[0]*e[0]+t[1]*e[1]}([o-t,i-e],c))};function V(t,e,r,n,o,i){var a=-1,c=1/0,s=[r,n],u=20;i&&i>200&&(u=i/10);for(var h=1/u,l=h/10,f=0;u>=f;f++){var p=f*h,v=[o.apply(void 0,t.concat([p])),o.apply(void 0,e.concat([p]))],d=W(s[0],s[1],v[0],v[1]);c>d&&(a=p,c=d)}if(0===a)return{x:t[0],y:e[0]};if(1===a){var y=t.length;return{x:t[y-1],y:e[y-1]}}c=1/0;for(var g=0;32>g&&1e-4<=l;g++){var m=a-l,w=a+l,x=[o.apply(void 0,t.concat([m])),o.apply(void 0,e.concat([m]))],b=W(s[0],s[1],x[0],x[1]);if(m>=0&&c>b)a=m,c=b;else{var E=[o.apply(void 0,t.concat([w])),o.apply(void 0,e.concat([w]))],L=W(s[0],s[1],E[0],E[1]);1>=w&&c>L?(a=w,c=L):l*=.5}}return{x:o.apply(void 0,t.concat([a])),y:o.apply(void 0,e.concat([a]))}}function Z(t,e,r,n){var o=1-n;return o*o*t+2*n*o*e+n*n*r}function J(t,e,r){var n=t+r-2*e;if(U(n,0))return[.5];var o=(t-e)/n;return o>1||0>o?[]:[o]}function K(t,e,r,n){return 2*(1-n)*(e-t)+2*n*(r-e)}function tt(t,e,r,n,o,i,a){var c=Z(t,r,o,a),s=Z(e,n,i,a),u=q(t,e,r,n,a),h=q(r,n,o,i,a);return[[t,e,u.x,u.y,c,s],[c,s,h.x,h.y,o,i]]}function et(t,e,r,n,o,i,a){if(0===a)return(W(t,e,r,n)+W(r,n,o,i)+W(t,e,o,i))/2;var c=tt(t,e,r,n,o,i,.5),s=c[0],u=c[1];return s.push(a-1),u.push(a-1),et.apply(void 0,s)+et.apply(void 0,u)}var rt={box:function(t,e,r,n,o,i){var a=J(t,r,o)[0],c=J(e,n,i)[0],s=[t,o],u=[e,i];return void 0!==a&&s.push(Z(t,r,o,a)),void 0!==c&&u.push(Z(e,n,i,c)),X(s,u)},length:function(t,e,r,n,o,i){return et(t,e,r,n,o,i,3)},nearestPoint:function(t,e,r,n,o,i,a,c){return V([t,r,o],[e,n,i],a,c,Z)},pointDistance:function(t,e,r,n,o,i,a,c){var s=this.nearestPoint(t,e,r,n,o,i,a,c);return W(s.x,s.y,a,c)},interpolationAt:Z,pointAt:function(t,e,r,n,o,i,a){return{x:Z(t,r,o,a),y:Z(e,n,i,a)}},divide:function(t,e,r,n,o,i,a){return tt(t,e,r,n,o,i,a)},tangentAngle:function(t,e,r,n,o,i,a){var c=K(t,r,o,a),s=K(e,n,i,a);return z(Math.atan2(s,c))}};function nt(t,e,r,n,o){var i=1-o;return i*i*i*t+3*e*o*i*i+3*r*o*o*i+n*o*o*o}function ot(t,e,r,n,o){var i=1-o;return 3*(i*i*(e-t)+2*i*o*(r-e)+o*o*(n-r))}function it(t,e,r,n){var o,i,a,c=-3*t+9*e-9*r+3*n,s=6*t-12*e+6*r,u=3*e-3*t,h=[];if(U(c,0))U(s,0)||0>(o=-u/s)||o>1||h.push(o);else{var l=s*s-4*c*u;U(l,0)?h.push(-s/(2*c)):l>0&&(i=(-s-(a=Math.sqrt(l)))/(2*c),0>(o=(-s+a)/(2*c))||o>1||h.push(o),0>i||i>1||h.push(i))}return h}function at(t,e,r,n,o,i,a,c,s){var u=nt(t,r,o,a,s),h=nt(e,n,i,c,s),l=q(t,e,r,n,s),f=q(r,n,o,i,s),p=q(o,i,a,c,s),v=q(l.x,l.y,f.x,f.y,s),d=q(f.x,f.y,p.x,p.y,s);return[[t,e,l.x,l.y,v.x,v.y,u,h],[u,h,d.x,d.y,p.x,p.y,a,c]]}function ct(t,e,r,n,o,i,a,c,s){if(0===s)return function(t,e){for(var r=0,n=t.length,o=0;n>o;o++)r+=W(t[o],e[o],t[(o+1)%n],e[(o+1)%n]);return r/2}([t,r,o,a],[e,n,i,c]);var u=at(t,e,r,n,o,i,a,c,.5),h=[].concat(u[0],[s-1]),l=[].concat(u[1],[s-1]);return ct.apply(void 0,h)+ct.apply(void 0,l)}var st={extrema:it,box:function(t,e,r,n,o,i,a,c){for(var s=[t,a],u=[e,c],h=it(t,r,o,a),l=it(e,n,i,c),f=0;h.length>f;f++)s.push(nt(t,r,o,a,h[f]));for(var p=0;l.length>p;p++)u.push(nt(e,n,i,c,l[p]));return X(s,u)},length:function(t,e,r,n,o,i,a,c){return ct(t,e,r,n,o,i,a,c,3)},nearestPoint:function(t,e,r,n,o,i,a,c,s,u,h){return V([t,r,o,a],[e,n,i,c],s,u,nt,h)},pointDistance:function(t,e,r,n,o,i,a,c,s,u,h){var l=this.nearestPoint(t,e,r,n,o,i,a,c,s,u,h);return W(l.x,l.y,s,u)},interpolationAt:nt,pointAt:function(t,e,r,n,o,i,a,c,s){return{x:nt(t,r,o,a,s),y:nt(e,n,i,c,s)}},divide:function(t,e,r,n,o,i,a,c,s){return at(t,e,r,n,o,i,a,c,s)},tangentAngle:function(t,e,r,n,o,i,a,c,s){var u=ot(t,r,o,a,s),h=ot(e,n,i,c,s);return z(Math.atan2(h,u))}};function ut(t,e,r,n){var o=t-r,i=e-n;return Math.sqrt(o*o+i*i)}function ht(t,e,r,n,o,i){return!(t>o||o>t+r||e>i||i>e+n)}function lt(t,e,r,n,o,i,a,c){var s=(Math.atan2(c-e,a-t)+2*Math.PI)%(2*Math.PI),u={x:t+r*Math.cos(s),y:e+r*Math.sin(s)};return ut(u.x,u.y,a,c)<=i/2}function ft(t,e,r,n,o,i,a){var c=o/2;return!(Math.min(t,r)-c>i||i>Math.max(t,r)+c||Math.min(e,n)-c>a||a>Math.max(e,n)+c)&&Q(t,e,r,n,i,a)<=o/2}function pt(t,e,r,n,o){var i=t.length;if(2>i)return!1;for(var a=0;i-1>a;a++){if(ft(t[a][0],t[a][1],t[a+1][0],t[a+1][1],e,r,n))return!0}if(o){var c=t[0],s=t[i-1];if(ft(c[0],c[1],s[0],s[1],e,r,n))return!0}return!1}function vt(t){return 1e-6>Math.abs(t)?0:0>t?-1:1}function dt(t,e,r){return!((r[0]-t[0])*(e[1]-t[1])!=(e[0]-t[0])*(r[1]-t[1])||Math.min(t[0],e[0])>r[0]||r[0]>Math.max(t[0],e[0])||Math.min(t[1],e[1])>r[1]||r[1]>Math.max(t[1],e[1]))}function yt(t,e,r){var n=!1,o=t.length;if(2>=o)return!1;for(var i=0;o>i;i++){var a=t[i],c=t[(i+1)%o];if(dt(a,c,[e,r]))return!0;vt(a[1]-r)>0!=vt(c[1]-r)>0&&0>vt(e-(r-a[1])*(a[0]-c[0])/(a[1]-c[1])-a[0])&&(n=!n)}return n}function gt(t,e,r){for(var n=!1,o=0;t.length>o;o++){if(n=yt(t[o],e,r))break}return n}function mt(t,r,n){var o=t.parsedStyle,i=o.r,a=o.fill,c=o.stroke,s=o.pointerEvents,u=((o.lineWidth||0)+(o.increasedLineWidthForHitTesting||0))/2,h=ut(i,i,r.x,r.y),l=e.isFillOrStrokeAffected(s,a,c),f=l[0],p=l[1];return f&&p||n?i+u>=h:f?i>=h:!!p&&(h>=i-u&&i+u>=h)}function wt(t,e,r,n){return t/(r*r)+e/(n*n)}function xt(t,r,n){var o=t.parsedStyle,i=o.rx,a=o.ry,c=o.lineWidth,s=o.increasedLineWidthForHitTesting,u=r.x,h=r.y,l=e.isFillOrStrokeAffected(o.pointerEvents,o.fill,o.stroke),f=l[0],p=l[1],v=((c||0)+(s||0))/2,d=(u-i)*(u-i),y=(h-a)*(h-a);return f&&p||n?1>=wt(d,y,i+v,a+v):f?1>=wt(d,y,i,a):!!p&&(wt(d,y,i-v,a-v)>=1&&1>=wt(d,y,i+v,a+v))}function bt(t,r,n){var o=t.parsedStyle,i=o.x1,a=o.y1,c=o.x2,s=o.y2,u=o.lineWidth,h=o.increasedLineWidthForHitTesting,l=o.defX,f=void 0===l?0:l,p=o.defY,v=void 0===p?0:p;return!(!e.isFillOrStrokeAffected(o.pointerEvents,o.fill,o.stroke)[1]&&!n||!u)&&ft(i,a,c,s,(u||0)+(h||0),r.x+f,r.y+v)}function Et(t,r,n,o,i){var a=t.parsedStyle,c=a.lineWidth,s=a.increasedLineWidthForHitTesting,u=a.defX,h=void 0===u?0:u,l=a.defY,f=void 0===l?0:l,p=a.path,v=p.segments,d=p.hasArc,y=p.polylines,m=p.polygons,w=e.isFillOrStrokeAffected(a.pointerEvents,(null==m?void 0:m.length)&&a.fill,a.stroke),x=w[0],b=w[1],E=e.getOrCalculatePathTotalLength(t),L=!1;return x||n?L=d?o(i,t,r):gt(m,r.x+h,r.y+f)||gt(y,r.x+h,r.y+f):((b||n)&&(L=function(t,e,r,n,o){for(var i=!1,a=e/2,c=0;t.length>c;c++){var s=t[c],u=s.currentPoint,h=s.params,l=s.prePoint,f=s.box;if(!f||ht(f.x-a,f.y-a,f.width+e,f.height+e,r,n))switch(s.command){case"L":case"Z":if(i=ft(l[0],l[1],u[0],u[1],e,r,n))return!0;break;case"Q":if(i=e/2>=rt.pointDistance(l[0],l[1],h[1],h[2],h[3],h[4],r,n))return!0;break;case"C":if(i=e/2>=st.pointDistance(l[0],l[1],h[1],h[2],h[3],h[4],h[5],h[6],r,n,o))return!0;break;case"A":s.cubicParams||(s.cubicParams=g(l[0],l[1],h[1],h[2],h[3],h[4],h[5],h[6],h[7],void 0));for(var p=s.cubicParams,v=l,d=0;p.length>d;d+=6){var y=st.pointDistance(v[0],v[1],p[d],p[d+1],p[d+2],p[d+3],p[d+4],p[d+5],r,n,o);if(v=[p[d+4],p[d+5]],i=e/2>=y)return!0}}}return i}(v,(c||0)+(s||0),r.x+h,r.y+f,E)),L)}function Lt(t,r,n){var o=t.parsedStyle,i=o.lineWidth,a=o.increasedLineWidthForHitTesting,c=o.points,s=o.defX,u=void 0===s?0:s,h=o.defY,l=void 0===h?0:h,f=e.isFillOrStrokeAffected(o.pointerEvents,o.fill,o.stroke),p=f[0],v=!1;return(f[1]||n)&&(v=pt(c.points,(i||0)+(a||0),r.x+u,r.y+l,!0)),v||!p&&!n||(v=yt(c.points,r.x+u,r.y+l)),v}function Ot(t,r,n){var o=t.parsedStyle,i=o.lineWidth,a=o.increasedLineWidthForHitTesting,c=o.points,s=o.defX,u=void 0===s?0:s,h=o.defY,l=void 0===h?0:h;return!(!e.isFillOrStrokeAffected(o.pointerEvents,o.fill,o.stroke)[1]&&!n||!i)&&pt(c.points,(i||0)+(a||0),r.x+u,r.y+l,!1)}function Pt(t,r,n,o,i){var a=t.parsedStyle,c=a.radius,s=a.lineWidth,u=a.increasedLineWidthForHitTesting,h=a.width,l=a.height,f=e.isFillOrStrokeAffected(a.pointerEvents,a.fill,a.stroke),p=f[0],v=f[1],d=(s||0)+(u||0);if(c&&c.some((function(t){return 0!==t}))){var y=!1;return(v||n)&&(y=function(t,e,r,n,o,i,a,c){var s=o[0],u=o[1],h=o[2],l=o[3];return ft(t+s,e,t+r-u,e,i,a,c)||ft(t+r,e+u,t+r,e+n-h,i,a,c)||ft(t+r-h,e+n,t+l,e+n,i,a,c)||ft(t,e+n-l,t,e+s,i,a,c)||lt(t+r-u,e+u,u,0,0,i,a,c)||lt(t+r-h,e+n-h,h,0,0,i,a,c)||lt(t+l,e+n-l,l,0,0,i,a,c)||lt(t+s,e+s,s,0,0,i,a,c)}(0,0,h,l,c.map((function(t){return E(t,0,Math.min(Math.abs(h)/2,Math.abs(l)/2))})),d,r.x,r.y)),y||!p&&!n||(y=o(i,t,r)),y}var g=d/2;return p&&v||n?ht(0-g,0-g,h+g,l+g,r.x,r.y):p?ht(0,0,h,l,r.x,r.y):!!v&&function(t,e,r,n,o,i,a){var c=o/2;return ht(t-c,e-c,r,o,i,a)||ht(t+r-c,e-c,o,n,i,a)||ht(t+c,e+n-c,r,o,i,a)||ht(t-c,e+c,o,n,i,a)}(0,0,h,l,d,r.x,r.y)}var Mt=function(t){var r,n;function o(){for(var e,r=arguments.length,n=Array(r),o=0;r>o;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).name="canvas-picker",e}(r=o).prototype=Object.create((n=t).prototype),r.prototype.constructor=r,I(r,n);var i=o.prototype;return i.init=function(){var t,r=function(){return!0},n=((t={})[e.Shape.CIRCLE]=mt,t[e.Shape.ELLIPSE]=xt,t[e.Shape.RECT]=Pt,t[e.Shape.LINE]=bt,t[e.Shape.POLYLINE]=Ot,t[e.Shape.POLYGON]=Lt,t[e.Shape.PATH]=Et,t[e.Shape.TEXT]=r,t[e.Shape.GROUP]=null,t[e.Shape.IMAGE]=r,t[e.Shape.HTML]=null,t[e.Shape.MESH]=null,t);this.context.pointInPathPickerFactory=n,this.addRenderingPlugin(new Y)},i.destroy=function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()},o}(e.AbstractRendererPlugin),St=Object.freeze({__proto__:null,Plugin:Mt});function kt(){kt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=Object.create((e&&e.prototype instanceof f?e:f).prototype),a=new P(o||[]);return n(i,"_invoke",{value:b(t,r,a)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function v(){}var d={};s(d,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(M([])));g&&g!==e&&r.call(g,i)&&(d=g);var m=v.prototype=f.prototype=Object.create(d);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(n,i,a,c){var s=h(t[n],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function b(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=h(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,l;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function M(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},w(x.prototype),s(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(m),s(m,c,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=M,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(this.prev>=i.tryLoc){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(i.catchLoc>this.prev)return n(i.catchLoc,!0);if(i.finallyLoc>this.prev)return n(i.finallyLoc)}else if(c){if(i.catchLoc>this.prev)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(i.finallyLoc>this.prev)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(this.prev>=o.tryLoc&&r.call(o,"finallyLoc")&&o.finallyLoc>this.prev){var i=o;break}}i&&("break"===t||"continue"===t)&&e>=i.tryLoc&&i.finallyLoc>=e&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:M(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Tt(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function At(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Tt(i,n,o,a,c,"next",t)}function c(t){Tt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function _t(){return _t=Object.assign?Object.assign.bind():function(t){for(var e=1;arguments.length>e;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},_t.apply(this,arguments)}function Ct(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,jt(t,e)}function jt(t,e){return jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jt(t,e)}var Nt=function(){function t(t){this.canvasRendererPluginOptions=void 0,this.context=void 0,this.pathGeneratorFactory=void 0,this.rBush=void 0,this.removedRBushNodeAABBs=[],this.renderQueue=[],this.restoreStack=[],this.clearFullScreen=!1,this.vpMatrix=s(),this.dprMatrix=s(),this.tmpMat4=s(),this.vec3a=f(),this.vec3b=f(),this.vec3c=f(),this.vec3d=f(),this.canvasRendererPluginOptions=t}var r=t.prototype;return r.apply=function(r,n){var o=this;this.context=r;var i=r.config,a=r.camera,c=r.renderingService,s=r.renderingContext,u=r.pathGeneratorFactory;this.rBush=r.rBushRoot,this.pathGeneratorFactory=u;var l=r.contextService,f=s.root.ownerDocument.defaultView,p=function(t){var e=t.target.rBushNode;e.aabb&&o.removedRBushNodeAABBs.push(e.aabb)},d=function(t){var e=t.target.rBushNode;e.aabb&&o.removedRBushNodeAABBs.push(e.aabb)};c.hooks.init.tapPromise(t.tag,At(kt().mark((function t(){var r,n,a,c;return kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.addEventListener(e.ElementEvent.UNMOUNTED,p),f.addEventListener(e.ElementEvent.CULLED,d),r=l.getDPR(),n=i.width,a=i.height,c=l.getContext(),o.clearRect(c,0,0,n*r,a*r,i.background);case 6:case"end":return t.stop()}}),t)})))),c.hooks.destroy.tap(t.tag,(function(){f.removeEventListener(e.ElementEvent.UNMOUNTED,p),f.removeEventListener(e.ElementEvent.CULLED,d)})),c.hooks.beginFrame.tap(t.tag,(function(){var t=l.getContext(),e=l.getDPR(),r=i.width,n=i.height,a=o.canvasRendererPluginOptions,s=a.dirtyObjectNumThreshold,u=a.dirtyObjectRatioThreshold,h=c.getStats(),f=h.rendered,p=f/h.total;o.clearFullScreen=c.disableDirtyRectangleRendering()||f>s&&p>u,t&&(t.resetTransform(),o.clearFullScreen&&o.clearRect(t,0,0,r*e,n*e,i.background))}));var y=function t(e,r){e.isVisible()&&!e.isCulled()&&(o.renderDisplayObject(e,r,o.context,o.restoreStack,n),o.saveDirtyAABB(e)),(e.sortable.sorted||e.childNodes).forEach((function(e){t(e,r)}))};c.hooks.endFrame.tap(t.tag,(function(){var t,r,c=l.getContext(),u=l.getDPR();if((t=o.dprMatrix)[0]=(r=[u,u,1])[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=r[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,h(o.vpMatrix,o.dprMatrix,a.getOrthoMatrix()),o.clearFullScreen)y(s.root,c);else{var p=o.safeMergeAABB.apply(o,[o.mergeDirtyAABBs(o.renderQueue)].concat(o.removedRBushNodeAABBs.map((function(t){var r=t.minX,n=t.minY,o=t.maxX,i=t.maxY,a=new e.AABB;return a.setMinMax([r,n,0],[o,i,0]),a}))));if(o.removedRBushNodeAABBs=[],e.AABB.isEmpty(p))return void(o.renderQueue=[]);var d=o.convertAABB2Rect(p),g=d.x,m=d.y,w=d.width,x=d.height,b=v(o.vec3a,[g,m,0],o.vpMatrix),E=v(o.vec3b,[g+w,m,0],o.vpMatrix),L=v(o.vec3c,[g,m+x,0],o.vpMatrix),O=v(o.vec3d,[g+w,m+x,0],o.vpMatrix),P=Math.min(b[0],E[0],O[0],L[0]),M=Math.min(b[1],E[1],O[1],L[1]),S=Math.max(b[0],E[0],O[0],L[0]),k=Math.max(b[1],E[1],O[1],L[1]),T=Math.floor(P),A=Math.floor(M),_=Math.ceil(S-P),C=Math.ceil(k-M);c.save(),o.clearRect(c,T,A,_,C,i.background),c.beginPath(),c.rect(T,A,_,C),c.clip(),c.setTransform(o.vpMatrix[0],o.vpMatrix[1],o.vpMatrix[4],o.vpMatrix[5],o.vpMatrix[12],o.vpMatrix[13]),i.renderer.getConfig().enableDirtyRectangleRenderingDebug&&f.dispatchEvent(new e.CustomEvent(e.CanvasEvent.DIRTY_RECTANGLE,{dirtyRect:{x:T,y:A,width:_,height:C}})),o.searchDirtyObjects(n,p).sort((function(t,e){return t.sortable.renderOrder-e.sortable.renderOrder})).forEach((function(t){t&&t.isVisible()&&!t.isCulled()&&o.renderDisplayObject(t,c,o.context,o.restoreStack,n)})),c.restore(),o.renderQueue.forEach((function(t){o.saveDirtyAABB(t)})),o.renderQueue=[]}o.restoreStack.forEach((function(){c.restore()})),o.restoreStack=[]})),c.hooks.render.tap(t.tag,(function(t){o.clearFullScreen||o.renderQueue.push(t)}))},r.clearRect=function(t,e,r,n,o,i){t.clearRect(e,r,n,o),i&&(t.fillStyle=i,t.fillRect(e,r,n,o))},r.renderDisplayObject=function(t,r,n,o,i){var a=t.nodeName,c=o[o.length-1];!c||t.compareDocumentPosition(c)&Node.DOCUMENT_POSITION_CONTAINS||(r.restore(),o.pop());var s=this.context.styleRendererFactory[a],u=this.pathGeneratorFactory[a],h=t.parsedStyle.clipPath;if(h){this.applyWorldTransform(r,h);var l=this.pathGeneratorFactory[h.nodeName];l&&(r.save(),o.push(t),r.beginPath(),l(r,h.parsedStyle),r.closePath(),r.clip())}s&&(this.applyWorldTransform(r,t),r.save(),this.applyAttributesToContext(r,t)),u&&(r.beginPath(),u(r,t.parsedStyle),t.nodeName!==e.Shape.LINE&&t.nodeName!==e.Shape.PATH&&t.nodeName!==e.Shape.POLYLINE&&r.closePath()),s&&(s.render(r,t.parsedStyle,t,n,this,i),r.restore()),t.renderable.dirty=!1},r.convertAABB2Rect=function(t){var e=t.getMin(),r=t.getMax(),n=Math.floor(e[0]),o=Math.floor(e[1]);return{x:n,y:o,width:Math.ceil(r[0])-n,height:Math.ceil(r[1])-o}},r.mergeDirtyAABBs=function(t){var r=new e.AABB;return t.forEach((function(t){var e=t.getRenderBounds();r.add(e);var n=t.renderable.dirtyRenderBounds;n&&r.add(n)})),r},r.searchDirtyObjects=function(t,e){var r=e.getMin(),n=r[0],o=r[1],i=e.getMax();return this.rBush.search({minX:n,minY:o,maxX:i[0],maxY:i[1]}).map((function(e){return t.displayObjectPool.getByEntity(e.id)}))},r.saveDirtyAABB=function(t){var r=t.renderable;r.dirtyRenderBounds||(r.dirtyRenderBounds=new e.AABB);var n=t.getRenderBounds();n&&r.dirtyRenderBounds.update(n.center,n.halfExtents)},r.applyAttributesToContext=function(t,e){var r=e.parsedStyle,n=r.stroke,o=r.fill,i=r.opacity,a=r.lineDash,c=r.lineDashOffset;a&&t.setLineDash(a),m(c)||(t.lineDashOffset=c),m(i)||(t.globalAlpha*=i),m(n)||Array.isArray(n)||n.isNone||(t.strokeStyle=e.attributes.stroke),m(o)||Array.isArray(o)||o.isNone||(t.fillStyle=e.attributes.fill)},r.applyWorldTransform=function(t,e,r){var n=0,o=0,i=(e.parsedStyle||{}).anchor,a=i&&i[0]||0,c=i&&i[1]||0;if(0!==a||0!==c){var s=e.getGeometryBounds();n=-a*(s&&2*s.halfExtents[0]||0),o=-c*(s&&2*s.halfExtents[1]||0)}r?(u(this.tmpMat4,e.getLocalTransform()),this.vec3a[0]=n,this.vec3a[1]=o,this.vec3a[2]=0,l(this.tmpMat4,this.tmpMat4,this.vec3a),h(this.tmpMat4,r,this.tmpMat4),h(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(u(this.tmpMat4,e.getWorldTransform()),this.vec3a[0]=n,this.vec3a[1]=o,this.vec3a[2]=0,l(this.tmpMat4,this.tmpMat4,this.vec3a),h(this.tmpMat4,this.vpMatrix,this.tmpMat4)),t.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])},r.safeMergeAABB=function(){for(var t=new e.AABB,r=arguments.length,n=Array(r),o=0;r>o;o++)n[o]=arguments[o];return n.forEach((function(e){t.add(e)})),t},t}();Nt.tag="CanvasRenderer";var Rt=function(){function t(t){this.imagePool=void 0,this.imagePool=t}var r=t.prototype;return r.render=function(t,r,n,o,i,a){var c=r.fill,s=r.fillRule,u=r.opacity,h=r.fillOpacity,l=r.stroke,f=r.strokeOpacity,p=r.lineWidth,v=r.lineCap,d=r.lineJoin,y=r.shadowType,g=r.shadowColor,w=r.shadowBlur,x=r.filter,b=r.miterLimit,E=!m(c)&&!c.isNone,L=!m(l)&&!l.isNone&&p>0,O=0===c.alpha,P=!(!x||!x.length),M=!m(g)&&w>0,S=n.nodeName,k="inner"===y,T=L&&M&&(S===e.Shape.PATH||S===e.Shape.LINE||S===e.Shape.POLYLINE||O||k);E&&(t.globalAlpha=u*h,T||It(n,t,M),this.fill(t,n,c,s,o,i,a),T||this.clearShadowAndFilter(t,P,M)),L&&(t.globalAlpha=u*f,t.lineWidth=p,m(b)||(t.miterLimit=b),m(v)||(t.lineCap=v),m(d)||(t.lineJoin=d),T&&(k&&(t.globalCompositeOperation="source-atop"),It(n,t,!0),k&&(this.stroke(t,n,l,o,i,a),t.globalCompositeOperation="source-over",this.clearShadowAndFilter(t,P,!0))),this.stroke(t,n,l,o,i,a))},r.clearShadowAndFilter=function(t,e,r){if(r&&(t.shadowColor="transparent",t.shadowBlur=0),e){var n=t.filter;!m(n)&&n.indexOf("drop-shadow")>-1&&(t.filter=n.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}},r.fill=function(t,r,n,o,i,a,c){var s=this;Array.isArray(n)?n.forEach((function(e){t.fillStyle=s.getColor(e,r,t),t.fill(o)})):(e.isPattern(n)&&(t.fillStyle=this.getPattern(n,r,t,i,a,c)),t.fill(o))},r.stroke=function(t,r,n,o,i,a){var c=this;Array.isArray(n)?n.forEach((function(e){t.strokeStyle=c.getColor(e,r,t),t.stroke()})):(e.isPattern(n)&&(t.strokeStyle=this.getPattern(n,r,t,o,i,a)),t.stroke())},r.getPattern=function(t,e,r,n,o,i){var a,c;if("rect"===t.image.nodeName){var s=t.image.parsedStyle,u=s.width,h=s.height;c=n.contextService.getDPR();var l=n.config.offscreenCanvas;(a=i.offscreenCanvas.getOrCreateCanvas(l)).width=u*c,a.height=h*c;var f=i.offscreenCanvas.getOrCreateContext(l),p=[];t.image.forEach((function(t){o.renderDisplayObject(t,f,n,p,i)})),p.forEach((function(){f.restore()}))}return this.imagePool.getOrCreatePatternSync(t,r,a,c,(function(){e.renderable.dirty=!0,n.renderingService.dirtify()}))},r.getColor=function(t,r,n){var o;if(t.type===e.GradientType.LinearGradient||t.type===e.GradientType.RadialGradient){var i=r.getGeometryBounds();o=this.imagePool.getOrCreateGradient(_t({type:t.type},t.value,{width:i&&2*i.halfExtents[0]||1,height:i&&2*i.halfExtents[1]||1}),n)}return o},t}();function It(t,e,r){var n=t.parsedStyle,o=n.filter,i=n.shadowColor,a=n.shadowBlur,c=n.shadowOffsetX,s=n.shadowOffsetY;o&&o.length&&(e.filter=t.style.filter),r&&(e.shadowColor=""+i,e.shadowBlur=a||0,e.shadowOffsetX=c||0,e.shadowOffsetY=s||0)}var Gt=function(){function t(t){this.imagePool=void 0,this.imagePool=t}return t.prototype.render=function(t,e,r){var n,o=e.img,i=e.shadowColor,a=e.shadowBlur,c=e.width,s=e.height;if(b(o)?n=this.imagePool.getImageSync(o):(c||(c=o.width),s||(s=o.height),n=o),n){It(r,t,!m(i)&&a>0);try{t.drawImage(n,0,0,c,s)}catch(t){}}},t}(),Ft=function(){function t(){}var r=t.prototype;return r.render=function(t,r,n){var o=r.lineWidth,i=r.textAlign,a=r.textBaseline,c=r.lineJoin,s=r.miterLimit,u=r.letterSpacing,h=r.stroke,l=r.fill,f=r.fillOpacity,p=r.strokeOpacity,v=r.opacity,d=r.metrics,y=r.dx,g=r.dy,w=r.shadowColor,x=r.shadowBlur,b=d.lines,E=d.height,L=d.lineHeight,O=d.lineMetrics;t.font=d.font,t.lineWidth=o,t.textAlign="middle"===i?"center":i,t.textBaseline=e.runtime.enableCSSParsing||"alphabetic"!==a?a:"bottom",t.lineJoin=c,m(s)||(t.miterLimit=s);var P=0;"middle"===a?P=-E/2-L/2:"bottom"===a||"alphabetic"===a||"ideographic"===a?P=-E:"top"!==a&&"hanging"!==a||(P=-L);var M=y||0;P+=g||0,It(n,t,!m(w)&&x>0);for(var S=0;b.length>S;S++){var k=o/2+M;P+=L,m(h)||h.isNone||!o||this.drawLetterSpacing(t,b[S],O[S],i,k,P,u,f,p,v,!0),m(l)||this.drawLetterSpacing(t,b[S],O[S],i,k,P,u,f,p,v)}},r.drawLetterSpacing=function(t,e,r,n,o,i,a,c,s,u,h){if(void 0===h&&(h=!1),0!==a){var l=t.textAlign;t.textAlign="left";var f=o;"center"===n||"middle"===n?f=o-r.width/2:"right"!==n&&"end"!==n||(f=o-r.width);for(var p=Array.from(e),v=t.measureText(e).width,d=0,y=0;p.length>y;++y){var g=p[y];h?this.strokeText(t,g,f,i,s):this.fillText(t,g,f,i,c,u),f+=v-(d=t.measureText(e.substring(y+1)).width)+a,v=d}t.textAlign=l}else h?this.strokeText(t,e,o,i,s):this.fillText(t,e,o,i,c,u)},r.fillText=function(t,e,r,n,o,i){var a,c=!m(o)&&1!==o;c&&(a=t.globalAlpha,t.globalAlpha=o*i),t.fillText(e,r,n),c&&(t.globalAlpha=a)},r.strokeText=function(t,e,r,n,o){var i,a=!m(o)&&1!==o;a&&(i=t.globalAlpha,t.globalAlpha=o),t.strokeText(e,r,n),a&&(t.globalAlpha=i)},t}(),Dt=function(t){function e(){return t.apply(this,arguments)||this}return Ct(e,t),e}(Rt),Bt=function(t){function e(){return t.apply(this,arguments)||this}return Ct(e,t),e}(Rt),$t=function(t){function e(){return t.apply(this,arguments)||this}return Ct(e,t),e}(Rt),Ht=function(t){function e(){return t.apply(this,arguments)||this}return Ct(e,t),e}(Rt),Yt=function(t){function e(){return t.apply(this,arguments)||this}return Ct(e,t),e}(Rt),Wt=function(t){function e(){return t.apply(this,arguments)||this}return Ct(e,t),e}(Rt),Ut=function(t){function e(){return t.apply(this,arguments)||this}return Ct(e,t),e}(Rt),Xt=function(t){function r(e){var r;return void 0===e&&(e={}),(r=t.call(this)||this).options=void 0,r.name="canvas-renderer",r.options=e,r}Ct(r,t);var n=r.prototype;return n.init=function(){var t,r=_t({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),n=this.context.imagePool,o=new Rt(n),i=((t={})[e.Shape.CIRCLE]=o,t[e.Shape.ELLIPSE]=o,t[e.Shape.RECT]=o,t[e.Shape.IMAGE]=new Gt(n),t[e.Shape.TEXT]=new Ft,t[e.Shape.LINE]=o,t[e.Shape.POLYLINE]=o,t[e.Shape.POLYGON]=o,t[e.Shape.PATH]=o,t[e.Shape.GROUP]=void 0,t[e.Shape.HTML]=void 0,t[e.Shape.MESH]=void 0,t);this.context.defaultStyleRendererFactory=i,this.context.styleRendererFactory=i,this.addRenderingPlugin(new Nt(r))},n.destroy=function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory},r}(e.AbstractRendererPlugin),zt=Object.freeze({__proto__:null,CircleRenderer:Bt,EllipseRenderer:$t,ImageRenderer:Gt,LineRenderer:Ht,PathRenderer:Ut,Plugin:Xt,PolygonRenderer:Wt,PolylineRenderer:Yt,RectRenderer:Dt,TextRenderer:Ft});function qt(){qt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=Object.create((e&&e.prototype instanceof f?e:f).prototype),a=new P(o||[]);return n(i,"_invoke",{value:b(t,r,a)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function v(){}var d={};s(d,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(M([])));g&&g!==e&&r.call(g,i)&&(d=g);var m=v.prototype=f.prototype=Object.create(d);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(n,i,a,c){var s=h(t[n],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function b(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=h(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,l;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function M(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},w(x.prototype),s(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(m),s(m,c,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=M,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(this.prev>=i.tryLoc){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(i.catchLoc>this.prev)return n(i.catchLoc,!0);if(i.finallyLoc>this.prev)return n(i.finallyLoc)}else if(c){if(i.catchLoc>this.prev)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(i.finallyLoc>this.prev)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(this.prev>=o.tryLoc&&r.call(o,"finallyLoc")&&o.finallyLoc>this.prev){var i=o;break}}i&&("break"===t||"continue"===t)&&e>=i.tryLoc&&i.finallyLoc>=e&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:M(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function Qt(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function Vt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Qt(i,n,o,a,c,"next",t)}function c(t){Qt(i,n,o,a,c,"throw",t)}a(void 0)}))}}function Zt(t,e){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zt(t,e)}var Jt=function(){function t(){this.context=void 0}return t.prototype.apply=function(e,r){var n=this,o=e.renderingService,i=e.renderingContext;this.context=e;var a=i.root.ownerDocument.defaultView,c=function(t){o.hooks.pointerMove.call(t)},s=function(t){o.hooks.pointerUp.call(t)},u=function(t){o.hooks.pointerDown.call(t)},h=function(t){o.hooks.pointerOver.call(t)},l=function(t){o.hooks.pointerOut.call(t)},f=function(t){o.hooks.pointerCancel.call(t)},p=function(t){o.hooks.pointerWheel.call(t)},v=function(t){r.globalThis.document.addEventListener("pointermove",c,!0),t.addEventListener("pointerdown",u,!0),t.addEventListener("pointerleave",l,!0),t.addEventListener("pointerover",h,!0),r.globalThis.addEventListener("pointerup",s,!0)},d=function(t){t.addEventListener("touchstart",u,!0),t.addEventListener("touchend",s,!0),t.addEventListener("touchmove",c,!0),t.addEventListener("touchcancel",f,!0)},y=function(t){r.globalThis.document.addEventListener("mousemove",c,!0),t.addEventListener("mousedown",u,!0),t.addEventListener("mouseout",l,!0),t.addEventListener("mouseover",h,!0),r.globalThis.addEventListener("mouseup",s,!0)};o.hooks.init.tapPromise(t.tag,Vt(qt().mark((function t(){var e;return qt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=n.context.contextService.getDomElement(),r.globalThis.navigator.msPointerEnabled?(e.style.msContentZooming="none",e.style.msTouchAction="none"):a.supportsPointerEvents&&(e.style.touchAction="none"),a.supportsPointerEvents?v(e):y(e),a.supportsTouchEvents&&d(e),e.addEventListener("wheel",p,{passive:!0,capture:!0});case 5:case"end":return t.stop()}}),t)})))),o.hooks.destroy.tap(t.tag,(function(){var t=n.context.contextService.getDomElement();r.globalThis.navigator.msPointerEnabled?(t.style.msContentZooming="",t.style.msTouchAction=""):a.supportsPointerEvents&&(t.style.touchAction=""),a.supportsPointerEvents?function(t){r.globalThis.document.removeEventListener("pointermove",c,!0),t.removeEventListener("pointerdown",u,!0),t.removeEventListener("pointerleave",l,!0),t.removeEventListener("pointerover",h,!0),r.globalThis.removeEventListener("pointerup",s,!0)}(t):function(t){r.globalThis.document.removeEventListener("mousemove",c,!0),t.removeEventListener("mousedown",u,!0),t.removeEventListener("mouseout",l,!0),t.removeEventListener("mouseover",h,!0),r.globalThis.removeEventListener("mouseup",s,!0)}(t),a.supportsTouchEvents&&function(t){t.removeEventListener("touchstart",u,!0),t.removeEventListener("touchend",s,!0),t.removeEventListener("touchmove",c,!0),t.removeEventListener("touchcancel",f,!0)}(t),t.removeEventListener("wheel",p,!0)}))},t}();Jt.tag="DOMInteraction";var Kt=function(t){var e,r;function n(){for(var e,r=arguments.length,n=Array(r),o=0;r>o;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).name="dom-interaction",e}(e=n).prototype=Object.create((r=t).prototype),e.prototype.constructor=e,Zt(e,r);var o=n.prototype;return o.init=function(){this.addRenderingPlugin(new Jt)},o.destroy=function(){this.removeAllRenderingPlugins()},n}(e.AbstractRendererPlugin),te=Object.freeze({__proto__:null,Plugin:Kt});function ee(){ee=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=Object.create((e&&e.prototype instanceof f?e:f).prototype),a=new P(o||[]);return n(i,"_invoke",{value:b(t,r,a)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function v(){}var d={};s(d,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(M([])));g&&g!==e&&r.call(g,i)&&(d=g);var m=v.prototype=f.prototype=Object.create(d);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(n,i,a,c){var s=h(t[n],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function b(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=h(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,l;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function M(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},w(x.prototype),s(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(m),s(m,c,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=M,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(this.prev>=i.tryLoc){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(i.catchLoc>this.prev)return n(i.catchLoc,!0);if(i.finallyLoc>this.prev)return n(i.finallyLoc)}else if(c){if(i.catchLoc>this.prev)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(i.finallyLoc>this.prev)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(this.prev>=o.tryLoc&&r.call(o,"finallyLoc")&&o.finallyLoc>this.prev){var i=o;break}}i&&("break"===t||"continue"===t)&&e>=i.tryLoc&&i.finallyLoc>=e&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:M(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function re(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function ne(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){re(i,n,o,a,c,"next",t)}function c(t){re(i,n,o,a,c,"throw",t)}a(void 0)}))}}function oe(t,e){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oe(t,e)}var ie=function(){function t(){this.context=void 0,this.$camera=void 0}var r=t.prototype;return r.joinTransformMatrix=function(t){return"matrix("+[t[0],t[1],t[4],t[5],t[12],t[13]].join(",")+")"},r.apply=function(r){var n=this,o=r.camera,i=r.renderingContext,a=r.renderingService,c=r.displayObjectPool;this.context=r;var s=i.root.ownerDocument.defaultView,u=function(t,e){e.style.transform=n.joinTransformMatrix(t.getWorldTransform())},h=function(t){var r=t.target;if(r.nodeName===e.Shape.HTML){n.$camera||(n.$camera=n.createCamera(o));var i=n.getOrCreateEl(r);n.$camera.appendChild(i);var a=r.ownerDocument.documentElement.attributes;Object.keys(a).forEach((function(t){i.style[t]=a[t]})),Object.keys(r.attributes).forEach((function(t){n.updateAttribute(t,r)})),u(r,i)}},l=function(t){var r=t.target;if(r.nodeName===e.Shape.HTML&&n.$camera){var o=n.getOrCreateEl(r);o&&o.remove()}},f=function(t){var r=t.target;r.nodeName===e.Shape.HTML&&n.updateAttribute(t.attrName,r)},p=function(t){var r=t.target;if(r.nodeName===e.Shape.HTML){var o=n.getOrCreateEl(r);u(r,o)}},v=function(){if(n.$camera){var t=n.context.config,e=t.height;n.$camera.style.width=(t.width||0)+"px",n.$camera.style.height=(e||0)+"px"}};a.hooks.init.tapPromise(t.tag,ne(ee().mark((function t(){return ee().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c.getHTMLs().length&&(n.$camera=n.createCamera(o)),s.addEventListener(e.CanvasEvent.RESIZE,v),s.addEventListener(e.ElementEvent.MOUNTED,h),s.addEventListener(e.ElementEvent.UNMOUNTED,l),s.addEventListener(e.ElementEvent.ATTR_MODIFIED,f),s.addEventListener(e.ElementEvent.BOUNDS_CHANGED,p);case 6:case"end":return t.stop()}}),t)})))),a.hooks.endFrame.tap(t.tag,(function(){n.$camera&&i.renderReasons.has(e.RenderReason.CAMERA_CHANGED)&&(n.$camera.style.transform=n.joinTransformMatrix(o.getOrthoMatrix()))})),a.hooks.destroy.tap(t.tag,(function(){n.$camera&&n.$camera.remove(),s.removeEventListener(e.CanvasEvent.RESIZE,v),s.removeEventListener(e.ElementEvent.MOUNTED,h),s.removeEventListener(e.ElementEvent.UNMOUNTED,l),s.removeEventListener(e.ElementEvent.ATTR_MODIFIED,f),s.removeEventListener(e.ElementEvent.BOUNDS_CHANGED,p)}))},r.getId=function(t){return t.id||"g-html-"+t.entity},r.createCamera=function(t){var e=this.context.config,r=e.document,n=e.width,o=e.height,i=this.context.contextService.getDomElement(),a=i.parentNode;if(a){var c="g-canvas-camera",s=a.querySelector("#"+c);if(!s){var u=(r||document).createElement("div");s=u,u.id=c,u.style.position="absolute",u.style.left=(i.offsetLeft||0)+"px",u.style.top=(i.offsetTop||0)+"px",u.style.transformOrigin="left top",u.style.transform=this.joinTransformMatrix(t.getOrthoMatrix()),u.style.overflow="hidden",u.style.pointerEvents="none",u.style.width=(n||0)+"px",u.style.height=(o||0)+"px",a.appendChild(u)}return s}return null},r.getOrCreateEl=function(t){var e=this.context.config.document,r=this.getId(t),n=this.$camera.querySelector("#"+r);return n||(n=(e||document).createElement("div"),t.parsedStyle.$el=n,n.id=r,t.name&&n.setAttribute("name",t.name),t.className&&(n.className=t.className),n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style["will-change"]="transform",n.style.transform=this.joinTransformMatrix(t.getWorldTransform())),n},r.updateAttribute=function(t,r){var n=this.getOrCreateEl(r);switch(t){case"innerHTML":var o=r.parsedStyle.innerHTML;b(o)?n.innerHTML=o:(n.innerHTML="",n.appendChild(o));break;case"transformOrigin":var i=r.parsedStyle.transformOrigin;n.style["transform-origin"]=i[0].value+" "+i[1].value;break;case"width":if(e.runtime.enableCSSParsing){var a=r.computedStyleMap().get("width");n.style.width=""+a}else{var c=r.parsedStyle.width;n.style.width=L(c)?c+"px":""+c}break;case"height":if(e.runtime.enableCSSParsing){var s=r.computedStyleMap().get("height");n.style.height=""+s}else{var u=r.parsedStyle.height;n.style.height=L(u)?u+"px":""+u}break;case"zIndex":n.style["z-index"]=""+r.parsedStyle.zIndex;break;case"visibility":n.style.visibility=r.parsedStyle.visibility;break;case"pointerEvents":n.style.pointerEvents=r.parsedStyle.pointerEvents;break;case"opacity":n.style.opacity=""+r.parsedStyle.opacity;break;case"fill":var h=r.parsedStyle.fill,l="";e.isCSSRGB(h)?l=h.isNone?"transparent":r.getAttribute("fill"):Array.isArray(h)?l=r.getAttribute("fill"):e.isPattern(h),n.style.background=l;break;case"stroke":var f=r.parsedStyle.stroke,p="";e.isCSSRGB(f)?p=f.isNone?"transparent":r.getAttribute("stroke"):Array.isArray(f)?p=r.getAttribute("stroke"):e.isPattern(f),n.style["border-color"]=p,n.style["border-style"]="solid";break;case"lineWidth":n.style["border-width"]=(r.parsedStyle.lineWidth||0)+"px";break;case"lineDash":n.style["border-style"]="dashed";break;case"filter":n.style.filter=r.style.filter}},t}();ie.tag="HTMLRendering";var ae=function(t){var e,r;function n(){for(var e,r=arguments.length,n=Array(r),o=0;r>o;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).name="html-renderer",e}(e=n).prototype=Object.create((r=t).prototype),e.prototype.constructor=e,oe(e,r);var o=n.prototype;return o.init=function(){this.addRenderingPlugin(new ie)},o.destroy=function(){this.removeAllRenderingPlugins()},n}(e.AbstractRendererPlugin),ce=Object.freeze({__proto__:null,Plugin:ae});function se(){se=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,o){var i=Object.create((e&&e.prototype instanceof f?e:f).prototype),a=new P(o||[]);return n(i,"_invoke",{value:b(t,r,a)}),i}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function v(){}var d={};s(d,i,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(M([])));g&&g!==e&&r.call(g,i)&&(d=g);var m=v.prototype=f.prototype=Object.create(d);function w(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(n,i,a,c){var s=h(t[n],t,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(l).then((function(t){u.value=t,a(u)}),(function(t){return o("throw",t,a,c)}))}c(s.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function b(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return S()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=E(a,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=h(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function E(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),l;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,l;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function M(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return p.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:p,configurable:!0}),p.displayName=s(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},w(x.prototype),s(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(u(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(m),s(m,c,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=M,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(this.prev>=i.tryLoc){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(i.catchLoc>this.prev)return n(i.catchLoc,!0);if(i.finallyLoc>this.prev)return n(i.finallyLoc)}else if(c){if(i.catchLoc>this.prev)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(i.finallyLoc>this.prev)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(this.prev>=o.tryLoc&&r.call(o,"finallyLoc")&&o.finallyLoc>this.prev){var i=o;break}}i&&("break"===t||"continue"===t)&&e>=i.tryLoc&&i.finallyLoc>=e&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:M(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}function ue(t,e,r,n,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void r(t)}c.done?e(s):Promise.resolve(s).then(n,o)}function he(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ue(i,n,o,a,c,"next",t)}function c(t){ue(i,n,o,a,c,"throw",t)}a(void 0)}))}}function le(t,e){return le=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},le(t,e)}var fe="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var pe=function(){function t(t){this.canvasConfig=void 0,this.imageCache={},this.gradientCache={},this.patternCache={},this.canvasConfig=t}var r=t.prototype;return r.getImageSync=function(t,e){return this.imageCache[t]?e&&e():this.getOrCreateImage(t).then((function(){e&&e()})),this.imageCache[t]},r.getOrCreateImage=function(t){var r=this;if(this.imageCache[t])return Promise.resolve(this.imageCache[t]);var n=this.canvasConfig.createImage;return new Promise((function(o,i){var a;n?a=n(t):e.isBrowser&&(a=new window.Image),a&&(a.onload=function(){o(a)},a.onerror=function(t){i(t)},a.crossOrigin="Anonymous",a.src=t,r.imageCache[t]=a)}))},r.getOrCreatePatternSync=function(t,r,n,o,i){var a=this.generatePatternKey(t);if(a&&this.patternCache[a])return this.patternCache[a];var c,s=t.image,u=t.repetition,h=t.transform,l=!1;b(s)?c=this.getImageSync(s,i):n?(c=n,l=!0):c=s;var f,p,v=c&&r.createPattern(c,u);v&&(f=h?e.parsedTransformToMat4(e.parseTransform(h)):function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}((p=new fe(16),fe!=Float32Array&&(p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[11]=0,p[12]=0,p[13]=0,p[14]=0),p[0]=1,p[5]=1,p[10]=1,p[15]=1,p)),l&&function(t,e,r){var n=r[0],o=r[1],i=r[2];t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]}(f,f,[1/o,1/o,1]),v.setTransform({a:f[0],b:f[1],c:f[4],d:f[5],e:f[12],f:f[13]}));return a&&v&&(this.patternCache[a]=v),v},r.getOrCreateGradient=function(t,r){var n=this.generateGradientKey(t),o=t.type,i=t.steps,a=t.width,c=t.height,s=t.cx,u=t.cy,h=t.size;if(this.gradientCache[n])return this.gradientCache[n];var l=null;if(o===e.GradientType.LinearGradient){var f=e.computeLinearGradient(a,c,t.angle);l=r.createLinearGradient(f.x1,f.y1,f.x2,f.y2)}else if(o===e.GradientType.RadialGradient){var p=e.computeRadialGradient(a,c,s,u,h),v=p.x,d=p.y;l=r.createRadialGradient(v,d,0,v,d,p.r)}return l&&(i.forEach((function(t){var r,n=t.offset;n.unit===e.UnitType.kPercentage&&(null===(r=l)||void 0===r||r.addColorStop(n.value/100,""+t.color))})),this.gradientCache[n]=l),this.gradientCache[n]},r.generateGradientKey=function(t){var e=t.angle,r=t.cx,n=t.cy,o=t.size;return"gradient-"+t.type+"-"+((null==e?void 0:""+e)||0)+"-"+((null==r?void 0:""+r)||0)+"-"+((null==n?void 0:""+n)||0)+"-"+((null==o?void 0:""+o)||0)+"-"+t.width+"-"+t.height+"-"+t.steps.map((function(t){return""+t.offset+t.color})).join("-")},r.generatePatternKey=function(t){var e=t.image,r=t.repetition;return b(e)?"pattern-"+e+"-"+r:"rect"===e.nodeName?"pattern-"+e.entity+"-"+r:void 0},t}(),ve=function(){function t(){}return t.prototype.apply=function(r){var n=r.renderingService,o=r.imagePool,i=r.renderingContext.root.ownerDocument.defaultView,a=function(t){var r=t.target;if(r.nodeName===e.Shape.IMAGE){var i=r.attributes.img;b(i)&&o.getImageSync(i,(function(){r.renderable.dirty=!0,n.dirtify()}))}},c=function(t){var r=t.target,i=t.newValue;r.nodeName===e.Shape.IMAGE&&"img"===t.attrName&&b(i)&&o.getOrCreateImage(i).then((function(){r.renderable.dirty=!0,n.dirtify()}))};n.hooks.init.tapPromise(t.tag,he(se().mark((function t(){return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i.addEventListener(e.ElementEvent.MOUNTED,a),i.addEventListener(e.ElementEvent.ATTR_MODIFIED,c);case 2:case"end":return t.stop()}}),t)})))),n.hooks.destroy.tap(t.tag,(function(){i.removeEventListener(e.ElementEvent.MOUNTED,a),i.removeEventListener(e.ElementEvent.ATTR_MODIFIED,c)}))},t}();ve.tag="LoadImage";var de=function(t){var e,r;function n(){for(var e,r=arguments.length,n=Array(r),o=0;r>o;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).name="image-loader",e}(e=n).prototype=Object.create((r=t).prototype),e.prototype.constructor=e,le(e,r);var o=n.prototype;return o.init=function(){this.context.imagePool=new pe(this.context.config),this.addRenderingPlugin(new ve)},o.destroy=function(){this.removeAllRenderingPlugins()},n}(e.AbstractRendererPlugin),ye=Object.freeze({__proto__:null,ImagePool:pe,Plugin:de}),ge=function(){function t(t){this.$container=void 0,this.$canvas=void 0,this.dpr=void 0,this.context=void 0,this.canvasConfig=void 0,this.renderingContext=void 0,this.renderingContext=t.renderingContext,this.canvasConfig=t.config}var n=t.prototype;return n.init=function(){var t=o(r().mark((function t(){var e,n,o,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(e=this.canvasConfig).container,(o=e.canvas)?(this.$canvas=o,n&&o.parentElement!==n&&n.appendChild(o),this.$container=o.parentElement,this.canvasConfig.container=this.$container):n&&(this.$container=b(n)?document.getElementById(n):n,this.$container&&(i=document.createElement("canvas"),this.$container.appendChild(i),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=i)),this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.getContext=function(){return this.context},n.getDomElement=function(){return this.$canvas},n.getDPR=function(){return this.dpr},n.getBoundingClientRect=function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()},n.destroy=function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)},n.resize=function(t,r){var n=this.canvasConfig.devicePixelRatio||e.isBrowser&&window.devicePixelRatio||1;this.dpr=n=1>n?1:Math.ceil(n),this.$canvas&&(this.$canvas.width=this.dpr*t,this.$canvas.height=this.dpr*r,e.setDOMSize(this.$canvas,t,r)),this.renderingContext.renderReasons.add(e.RenderReason.CAMERA_CHANGED)},n.applyCursorStyle=function(t){this.$container&&this.$container.style&&(this.$container.style.cursor=t)},n.toDataURL=function(){var t=o(r().mark((function t(e){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e={}),t.abrupt("return",this.context.canvas.toDataURL((n=e).type,n.encoderOptions));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}(),me=function(t){function e(){for(var e,r=arguments.length,n=Array(r),o=0;r>o;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).name="canvas-context-register",e}i(e,t);var r=e.prototype;return r.init=function(){this.context.ContextService=ge},r.destroy=function(){delete this.context.ContextService},e}(e.AbstractRendererPlugin),we=function(t){function e(e){var r;return(r=t.call(this,e)||this).registerPlugin(new me),r.registerPlugin(new de),r.registerPlugin(new C),r.registerPlugin(new Xt),r.registerPlugin(new Kt),r.registerPlugin(new Mt),r.registerPlugin(new ae),r}return i(e,t),e}(e.AbstractRenderer);t.CanvasPathGenerator=j,t.CanvasPicker=St,t.CanvasRenderer=zt,t.DomInteraction=te,t.HTMLRenderer=ce,t.ImageLoader=ye,t.Renderer=we,Object.defineProperty(t,"__esModule",{value:!0})}));
